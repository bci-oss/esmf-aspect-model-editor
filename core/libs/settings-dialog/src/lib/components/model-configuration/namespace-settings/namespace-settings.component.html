<!--
  ~ Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
  ~
  ~ See the AUTHORS file(s) distributed with this work for
  ~ additional information regarding authorship.
  ~
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at https://mozilla.org/MPL/2.0/.
  ~
  ~ SPDX-License-Identifier: MPL-2.0
  -->

<form [formGroup]="form">
  <h3>
    Model Namespace
    <mat-icon
      [matTooltipShowDelay]="0"
      [matTooltipHideDelay]="100"
      [matTooltip]="'SETTINGS_DIALOG.NAMESPACES.ASPECT_NAMESPACE_TOOLTIP' | translate"
      >info
    </mat-icon>
  </h3>

  <div class="namespace-fields">
    <mat-form-field class="namespace-setting-field">
      <mat-label class="label-top">{{ 'SETTINGS_DIALOG.NAMESPACES.VALUE' | translate }}</mat-label>
      <input class="form-control" matInput spellcheck="false" formControlName="aspectUri" data-cy="namespaceTabValueInput" />
      @if (form.get('aspectUri').errors?.required) {
        <mat-error>Namespace is required</mat-error>
      }
      @if (form.get('aspectUri').errors?.invalidPattern) {
        <mat-error>Not a valid namespace</mat-error>
      }
    </mat-form-field>

    <mat-form-field class="namespace-setting-field">
      <mat-label class="label-top">{{ 'SETTINGS_DIALOG.NAMESPACES.VERSION' | translate }}</mat-label>
      <input class="form-control" matInput spellcheck="false" formControlName="aspectVersion" data-cy="namespaceTabVersionInput" />
      @if (form.get('aspectVersion').errors?.required) {
        <mat-error>Version is required</mat-error>
      }
      @if (form.get('aspectVersion').errors?.invalidVersionFormat) {
        <mat-error>Not a valid version</mat-error>
      }
    </mat-form-field>

    <mat-form-field class="namespace-setting-field">
      <mat-label class="label-top">{{ 'SETTINGS_DIALOG.NAMESPACES.NAME' | translate }}</mat-label>
      <input class="form-control" matInput spellcheck="false" formControlName="aspectName" data-cy="namespaceTabFileNameInput" />
    </mat-form-field>

    <mat-form-field class="namespace-setting-field">
      <mat-label class="label-top">{{ 'SETTINGS_DIALOG.NAMESPACES.SAMM_VERSION' | translate }}</mat-label>
      <input class="form-control" matInput spellcheck="false" formControlName="sammVersion" data-cy="namespaceTabSammVersionInput" />
    </mat-form-field>
  </div>
</form>

<mat-accordion>
  <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ 'SETTINGS_DIALOG.NAMESPACES.PREDEFINED_NAMESPACES' | translate }}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <table [dataSource]="predefinedNamespaces" mat-table>
      <caption></caption>
      <ng-container matColumnDef="name">
        <th id="name" *matHeaderCellDef mat-header-cell>{{ 'SETTINGS_DIALOG.NAMESPACES.NAME' | translate }}</th>
        <td *matCellDef="let element" mat-cell>{{ element.name }}</td>
      </ng-container>

      <ng-container matColumnDef="value">
        <th id="value" *matHeaderCellDef mat-header-cell>{{ 'SETTINGS_DIALOG.NAMESPACES.VALUE' | translate }}</th>
        <td *matCellDef="let element" mat-cell>{{ element.value }}</td>
      </ng-container>

      <ng-container matColumnDef="version">
        <th id="version" *matHeaderCellDef mat-header-cell>{{ 'SETTINGS_DIALOG.NAMESPACES.VERSION' | translate }}</th>
        <td *matCellDef="let element" mat-cell>{{ element.version }}</td>
      </ng-container>
      <tr *matHeaderRowDef="columns" mat-header-row></tr>
      <tr *matRowDef="let row; columns: columns" mat-row></tr>
    </table>
  </mat-expansion-panel>
</mat-accordion>

<br />

<a href="https://eclipse-esmf.github.io/samm-specification/snapshot/namespaces.html#prefixes" target="_blank" rel="noopener"
  >Link: Predefined namespace prefixes</a
>
